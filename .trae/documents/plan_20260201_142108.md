# 指令优化工具 - 完整改造计划

## 一、后端改造

### 1. 添加 ModelScope 大模型支持
- 修改 `backend/services/llm.js`
- 添加 ModelScope API 调用逻辑
- 使用用户提供的访问令牌：ms-bb2963f4-212c-4aed-ad3f-eee2c0156e14

### 2. 添加限流功能
- 修改 `backend/server.js`
- 添加限流中间件
- 本地开发（127.0.0.1）：不限次数
- 远程访问：每人每天 10 次限制
- 超出限制返回友好提示

### 3. 配置环境变量
- 修改 `backend/.env`
- 配置 ModelScope API Key
- 配置限流参数

---

## 二、前端响应式改造

### 1. 首页（Home.jsx）
- **移动端**：保持上下堆叠布局
- **PC端（≥768px）**：改为左右分栏
  - 左侧：输入区域 + 规则选择
  - 右侧：结果区域
  - 显示当前规则详情

### 2. 规则商店（RuleStore.jsx）
- **移动端**：1列垂直排列
- **平板（≥768px）**：2列网格
- **PC端（≥1024px）**：3列网格
- 搜索框居中显示

### 3. 导航组件（Navigation.jsx）
- **移动端**：底部导航栏
- **PC端（≥768px）**：顶部导航栏
- 使用 CSS Media Query 自动切换

### 4. App.jsx 布局容器
- 添加响应式主容器
- PC端限制最大宽度并居中
- 移动端全宽度

---

## 三、文件改动清单

| 文件路径 | 改动内容 |
|---------|----------|
| `backend/services/llm.js` | 添加 ModelScope API 支持 |
| `backend/server.js` | 添加限流中间件 |
| `backend/.env` | 配置 API Key 和限流参数 |
| `frontend/src/App.jsx` | 响应式布局容器 + 导航切换 |
| `frontend/src/pages/Home.jsx` | PC端左右分栏布局 |
| `frontend/src/pages/RuleStore.jsx` | 响应式网格卡片布局 |
| `frontend/src/components/Navigation.jsx` | 顶部/底部导航自动切换 |
| `frontend/src/index.css` | 添加响应式断点和样式 |

---

## 四、预期效果

### 移动端
- 上下堆叠布局
- 底部导航栏
- 单手操作友好

### PC端
- 左右分栏布局
- 顶部导航栏
- 键盘鼠标操作友好
- 规则卡片网格排列

---

## 五、使用说明

### 本地测试（不限次数）
- 访问 http://localhost:5173
- 本地访问不限次数限制

### 远程访问（限流 10 次/天）
- 部署后远程访问
- 每人每天最多 10 次调用
- 超出限制显示友好提示